# K8s 통합 대시보드

Rust와 Vue.js로 제작된 경량 쿠버네티스(Kubernetes) 리소스 모니터링 대시보드입니다. 이 애플리케이션은 로컬 머신에 설정된 `~/.kube/config` 파일을 읽어 여러 클러스터의 노드 및 파드 정보를 웹 인터페이스를 통해 시각적으로 보여주고, 강력한 검색 기능을 제공합니다.

## ✨ 주요 기능

* **통합 뷰**: 여러 쿠버네티스 클러스터의 정보를 하나의 대시보드에서 확인
* **상세 정보**: 클러스터, 노드, 파드별 상세 정보 및 라벨, 컨테이너 정보 조회
* **빠른 검색**: 노드 또는 파드 이름으로 전체 클러스터에서 리소스를 신속하게 검색
* **경량 및 고성능**: Rust 기반의 고성능 백엔드로 최소한의 리소스를 사용
* **단일 파일 배포**: 백엔드 서버가 직접 프론트엔드(HTML)를 서빙하여 실행 파일 하나로 간편하게 배포 가능

## 🛠️ 기술 스택

### 백엔드 (Backend)

* **언어**: [Rust](https://www.rust-lang.org/)
* **웹 프레임워크**: [Actix-web](https://actix.rs/)
* **쿠버네티스 클라이언트**: [kube-rs](https://kube.rs/)
* **로깅**: `env_logger`, `log`

### 프론트엔드 (Frontend)

* **라이브러리**: [Vue.js 3](https://vuejs.org/) (CDN 방식)
* **스타일링**: [Tailwind CSS](https://tailwindcss.com/) (CDN 방식)

## ⚙️ 로직 상세 설명

### 백엔드 로직 (`src/main.rs`)

1.  **서버 초기화**: `main` 함수가 실행되면 `env_logger`를 초기화하여 상세한 로그를 기록할 준비를 합니다.
2.  **Kubeconfig 로드**: `Kubeconfig::read()`를 통해 사용자의 홈 디렉터리에 있는 `~/.kube/config` 파일을 읽습니다. 파일에 정의된 모든 클러스터 컨텍스트(context)를 순회합니다.
3.  **클라이언트 생성**: 각 컨텍스트에 대해 `Config::from_custom_kubeconfig`를 사용하여 해당 클러스터에 접속할 수 있는 `Client`를 생성하고, 이를 `HashMap`에 저장합니다.
4.  **웹 서버 실행**: `Actix-web`의 `HttpServer`를 시작합니다.
    * **API 서비스**: `/api` 경로 아래에 API 엔드포인트를 그룹화합니다. 현재는 `/api/clusters` 하나만 존재합니다.
    * **정적 파일 서빙**: 루트(`/`) 경로에 대한 요청은 `./static` 폴더의 `index.html` 파일을 보여주도록 설정합니다. 이로써 백엔드와 프론트엔드가 하나의 서버로 동작합니다.
5.  **API 요청 처리** (`/api/clusters`):
    * 웹 브라우저에서 이 API를 호출하면, 등록된 모든 클러스터의 `Client`를 하나씩 꺼내 정보를 조회합니다.
    * `kube-rs`를 사용하여 각 클러스터의 모든 노드(`Api<Node>`)와 모든 파드(`Api<Pod>`) 목록을 비동기적으로 가져옵니다.
    * 가져온 데이터를 프론트엔드에서 사용하기 쉬운 `ClusterInfo`, `NodeInfo`, `PodInfo` 구조체로 가공합니다.
    * 최종적으로 가공된 데이터 목록을 JSON 형태로 웹 브라우저에 응답합니다.
    * 만약 K8s API 호출 중 오류가 발생하면, 서버가 죽는 대신 상세한 오류 메시지를 담아 `500 Internal Server Error`를 응답하여 문제 해결을 돕습니다.

### 프론트엔드 로직 (`static/index.html`)

1.  **초기화**: 페이지가 로드되면 Vue.js 애플리케이션이 생성되고, `onMounted` 훅을 통해 `fetchData` 함수를 즉시 호출합니다.
2.  **데이터 요청**: `fetchData` 함수는 백엔드의 `/api/clusters` 엔드포인트에 `fetch` 요청을 보냅니다.
    * 요청이 진행되는 동안 `loading` 상태를 `true`로 설정하여 "로딩 중..." 메시지를 표시합니다.
    * 요청이 실패하면 `error` 상태에 오류 메시지를 저장하여 화면에 보여줍니다.
3.  **데이터 렌더링**: 요청이 성공하면, 받아온 JSON 데이터를 `allClusters`라는 반응형 변수에 저장합니다. Vue는 이 데이터의 변경을 감지하고 자동으로 화면을 다시 그립니다.
    * `v-for` 디렉티브를 사용하여 `allClusters` 배열을 순회하며 왼쪽 패널에 클러스터 목록을 표시합니다.
4.  **상호작용 및 상태 관리**:
    * 사용자가 클러스터, 노드, 파드 등을 클릭하면 `@click` 이벤트 핸들러가 `selectedItem` 변수의 값을 업데이트합니다.
    * `selectedItem`의 타입(`cluster`, `node`, `pod`)에 따라 `v-if`와 `v-else-if`를 사용하여 오른쪽 패널에 해당 상세 정보를 조건부로 렌더링합니다.
    * 검색창에 입력된 값(`searchTerm`)은 `computed` 속성인 `searchResults`와 연동되어, `allClusters` 데이터에서 실시간으로 노드와 파드를 필터링한 결과를 보여줍니다.

## 🚀 실행 및 배포

자세한 내용은 화면 오른쪽에 열려있는 **`K8s 대시보드 배포 방안`** 문서를 참고해 주세요.
