# K8s í†µí•© ëŒ€ì‹œë³´ë“œ

Rustì™€ Vue.jsë¡œ ì œì‘ëœ ê²½ëŸ‰ ì¿ ë²„ë„¤í‹°ìŠ¤(Kubernetes) ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤. ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë¡œì»¬ ë¨¸ì‹ ì— ì„¤ì •ëœ `~/.kube/config` íŒŒì¼ì„ ì½ì–´ ì—¬ëŸ¬ í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œ ë° íŒŒë“œ ì •ë³´ë¥¼ ì›¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì£¼ê³ , ê°•ë ¥í•œ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

* **í†µí•© ë·°**: ì—¬ëŸ¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ì •ë³´ë¥¼ í•˜ë‚˜ì˜ ëŒ€ì‹œë³´ë“œì—ì„œ í™•ì¸
* **ìƒì„¸ ì •ë³´**: í´ëŸ¬ìŠ¤í„°, ë…¸ë“œ, íŒŒë“œë³„ ìƒì„¸ ì •ë³´ ë° ë¼ë²¨, ì»¨í…Œì´ë„ˆ ì •ë³´ ì¡°íšŒ
* **ë¹ ë¥¸ ê²€ìƒ‰**: ë…¸ë“œ ë˜ëŠ” íŒŒë“œ ì´ë¦„ìœ¼ë¡œ ì „ì²´ í´ëŸ¬ìŠ¤í„°ì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ ì‹ ì†í•˜ê²Œ ê²€ìƒ‰
* **ê²½ëŸ‰ ë° ê³ ì„±ëŠ¥**: Rust ê¸°ë°˜ì˜ ê³ ì„±ëŠ¥ ë°±ì—”ë“œë¡œ ìµœì†Œí•œì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©
* **ë‹¨ì¼ íŒŒì¼ ë°°í¬**: ë°±ì—”ë“œ ì„œë²„ê°€ ì§ì ‘ í”„ë¡ íŠ¸ì—”ë“œ(HTML)ë¥¼ ì„œë¹™í•˜ì—¬ ì‹¤í–‰ íŒŒì¼ í•˜ë‚˜ë¡œ ê°„í¸í•˜ê²Œ ë°°í¬ ê°€ëŠ¥

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### ë°±ì—”ë“œ (Backend)

* **ì–¸ì–´**: Rust
* **ì›¹ í”„ë ˆì„ì›Œí¬**: Actix-web
* **ì¿ ë²„ë„¤í‹°ìŠ¤ í´ë¼ì´ì–¸íŠ¸**: kube-rs
* **ë¡œê¹…**: env_logger, log

### í”„ë¡ íŠ¸ì—”ë“œ (Frontend)

* **ë¼ì´ë¸ŒëŸ¬ë¦¬**: Vue.js 3 (CDN ë°©ì‹)
* **ìŠ¤íƒ€ì¼ë§**: Tailwind CSS (CDN ë°©ì‹)

## âš™ï¸ ë¡œì§ ìƒì„¸ ì„¤ëª…

(ì´ì „ ë‚´ìš©ê³¼ ë™ì¼)

## ğŸš€ ì‹¤í–‰ ë° ë°°í¬

ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë¡œì»¬ í™˜ê²½ì—ì„œ ì§ì ‘ ì‹¤í–‰í•˜ê±°ë‚˜, Docker ì»¨í…Œì´ë„ˆë¡œ ë§Œë“¤ì–´ ì¿ ë²„ë„¤í‹°ìŠ¤ì— ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë°©ë²• 1: ë¡œì»¬ í™˜ê²½ì—ì„œ ì§ì ‘ ì‹¤í–‰

ë¡œì»¬ ê°œë°œ ë° í…ŒìŠ¤íŠ¸ì— ì í•©í•œ ë°©ë²•ì…ë‹ˆë‹¤.

1.  **ë¹Œë“œ:**
    í”„ë¡œì íŠ¸ ìµœìƒìœ„ ë””ë ‰í„°ë¦¬ì—ì„œ ë¦´ë¦¬ì¦ˆ ëª¨ë“œë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¹Œë“œí•©ë‹ˆë‹¤.
    ```bash
    cargo build --release
    ```

2.  **ì‹¤í–‰:**
    ë¹Œë“œê°€ ì™„ë£Œë˜ë©´ ì•„ë˜ ëª…ë ¹ì–´ë¡œ ì„œë²„ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.
    ```bash
    RUST_LOG=info ./target/release/k8s_node_server
    ```

3.  **ì ‘ì†:**
    ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ `http://127.0.0.1:8080`ìœ¼ë¡œ ì ‘ì†í•©ë‹ˆë‹¤.

    > **ì¤‘ìš”:** ì´ ë°©ë²•ì€ ì‹¤í–‰í•˜ëŠ” ë¨¸ì‹ ì— `~/.kube/config` íŒŒì¼ì´ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì •ë³´ë¥¼ ì½ì–´ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë°©ë²• 2: ì¿ ë²„ë„¤í‹°ìŠ¤ì— ë°°í¬ (Docker ì‚¬ìš©)

ì‹¤ì œ ìš´ì˜ í™˜ê²½ì— ë°°í¬í•˜ê¸° ìœ„í•œ ê¶Œì¥ ë°©ë²•ì…ë‹ˆë‹¤.

#### 1ë‹¨ê³„: Dockerfile ì‘ì„±

í”„ë¡œì íŠ¸ ìµœìƒìœ„ ë””ë ‰í„°ë¦¬ì— ì•„ë˜ ë‚´ìš©ìœ¼ë¡œ `Dockerfile`ì„ ìƒì„±í•©ë‹ˆë‹¤.

```dockerfile
# --- 1ë‹¨ê³„: ë¹Œë“œ í™˜ê²½ (Builder) ---
FROM rust:1-slim as builder
WORKDIR /usr/src/app
COPY Cargo.toml Cargo.lock ./
RUN mkdir src && echo "fn main() {}" > src/lib.rs && cargo build --release
COPY src ./src
RUN touch src/main.rs && cargo build --release

# --- 2ë‹¨ê³„: ì‹¤í–‰ í™˜ê²½ (Final Image) ---
FROM debian:bullseye-slim
RUN apt-get update && apt-get install -y ca-certificates && rm -rf /var/lib/apt/lists/*
COPY --from=builder /usr/src/app/target/release/k8s_node_server /usr/local/bin/
COPY static /static
WORKDIR /
EXPOSE 8080
CMD ["/usr/local/bin/k8s_node_server"]
```

#### 2ë‹¨ê³„: Docker ì´ë¯¸ì§€ ë¹Œë“œ

í„°ë¯¸ë„ì—ì„œ ìœ„ `Dockerfile`ì´ ìˆëŠ” ê²½ë¡œì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ Docker ì´ë¯¸ì§€ë¥¼ ë§Œë“­ë‹ˆë‹¤.
```bash
docker build -t k8s-dashboard:latest .
```

#### 3ë‹¨ê³„: ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— í‘¸ì‹œ

ë¹Œë“œëœ ì´ë¯¸ì§€ë¥¼ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ê°€ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬(ì˜ˆ: Docker Hub, GCR, Harbor ë“±)ì— í‘¸ì‹œí•´ì•¼ í•©ë‹ˆë‹¤.

ë¨¼ì €, ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì£¼ì†Œì— ë§ê²Œ ì´ë¯¸ì§€ì— íƒœê·¸ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
```bash
# ì˜ˆì‹œ: docker tag k8s-dashboard:latest your-registry/your-repo/k8s-dashboard:v1.0
docker tag k8s-dashboard:latest gwon/k8s-dashboard:v1.0
```

ê·¸ ë‹¤ìŒ, ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì´ë¯¸ì§€ë¥¼ í‘¸ì‹œí•©ë‹ˆë‹¤.
```bash
# ì˜ˆì‹œ: docker push your-registry/your-repo/k8s-dashboard:v1.0
docker push gwon/k8s-dashboard:v1.0
```

#### 4ë‹¨ê³„: `k8s-dashboard-deployment.yaml` íŒŒì¼ ìˆ˜ì •

ë°°í¬ YAML íŒŒì¼ì˜ `image` í•„ë“œë¥¼ ë°©ê¸ˆ í‘¸ì‹œí•œ ì´ë¯¸ì§€ì˜ ì „ì²´ ì£¼ì†Œë¡œ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤. (ì´ íŒŒì¼ì€ 'ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ' ì„¹ì…˜ì— í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.)

```yaml
# k8s-dashboard-deployment.yaml íŒŒì¼ì˜ ì¼ë¶€
...
      containers:
      - name: k8s-dashboard-container
        # ì¤‘ìš”: ì´ ë¶€ë¶„ì„ 3ë‹¨ê³„ì—ì„œ í‘¸ì‹œí•œ ì´ë¯¸ì§€ ì£¼ì†Œë¡œ ìˆ˜ì •í•©ë‹ˆë‹¤.
        image: gwon/k8s-dashboard:v1.0 
...
```

#### 5ë‹¨ê³„: ì¿ ë²„ë„¤í‹°ìŠ¤ì— ë°°í¬

ìˆ˜ì •ëœ YAML íŒŒì¼ì„ `kubectl`ì„ ì‚¬ìš©í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ì— ì ìš©í•©ë‹ˆë‹¤. ì´ ëª…ë ¹ì€ í•„ìš”í•œ ëª¨ë“  ë¦¬ì†ŒìŠ¤(ServiceAccount, Deployment, Service ë“±)ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
```bash
kubectl apply -f k8s-dashboard-deployment.yaml
```

#### 6ë‹¨ê³„: ì„œë¹„ìŠ¤ ì ‘ì† í™•ì¸

ë°°í¬ê°€ ì™„ë£Œë˜ë©´, ì•„ë˜ ëª…ë ¹ì–´ë¡œ ì™¸ë¶€ì—ì„œ ì ‘ì†í•  ìˆ˜ ìˆëŠ” í¬íŠ¸(NodePort)ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
```bash
kubectl get svc k8s-dashboard-service
```
ëª…ë ¹ì–´ ê²°ê³¼ì—ì„œ `PORT(S)` í•­ëª©ì„ í™•ì¸í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `80:30080/TCP`ì™€ ê°™ì´ í‘œì‹œëœë‹¤ë©´, `30080`ì´ ì™¸ë¶€ ì ‘ì† í¬íŠ¸ì…ë‹ˆë‹¤.

ì´ì œ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ `http://<í´ëŸ¬ìŠ¤í„°_ë…¸ë“œ_ì¤‘_í•˜ë‚˜ì˜_IP>:<NodePort>` ì£¼ì†Œë¡œ ì ‘ì†í•˜ì—¬ ëŒ€ì‹œë³´ë“œê°€ ë³´ì´ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

